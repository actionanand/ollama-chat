<div class="chat-container">
  <div class="message-wrapper" #messageContainer>
    <app-message
      *ngFor="let message of messages"
      [message]="message.content"
      [sender]="message.sender"
      [isStreaming]="message.isStreaming ?? false"
      [isThinking]="message.isThinking ?? false">
      <!-- Add edit button for user messages -->
      <div *ngIf="message.sender === 'User'" class="message-actions">
        <button class="edit-button" (click)="copyToInput(message.content)" [disabled]="isThinking || isStreaming">
          Edit
        </button>
      </div>
    </app-message>
  </div>
  <div class="input-area">
    <input
      #inputField
      type="text"
      [(ngModel)]="userInput"
      (keydown.enter)="!isThinking && !isStreaming && sendMessage()"
      [placeholder]="isThinking ? 'AI is thinking...' : isStreaming ? 'AI is responding...' : 'Type your message...'"
      [disabled]="isThinking || isStreaming" />

    <!-- Send button (disabled during thinking) -->
    <button *ngIf="!isStreaming" (click)="sendMessage()" [disabled]="isThinking">Send</button>

    <!-- Stop button (only shown during streaming) -->
    <button *ngIf="isStreaming" (click)="stopStreaming()" class="stop-button">Stop</button>
  </div>
</div>
