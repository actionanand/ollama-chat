<div class="message" [class.user-message]="sender === 'User'" [class.ai-message]="sender === 'Ollama'">
  <div class="sender">
    <div class="sender-info">
      <span>{{ sender }}</span>
      <button
        *ngIf="sender === 'Ollama' && !isStreaming && !isThinking"
        class="copy-button"
        (click)="copyMessage()"
        title="Copy entire message">
        <span>{{ copied ? 'Copied!' : 'Copy' }}</span>
      </button>
      <!-- Thinking indicator - shows before streaming begins -->
      <span *ngIf="sender === 'Ollama' && isThinking" class="thinking-indicator">
        <span>Thinking</span>
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </span>
      <!-- Streaming indicator - shows during text streaming -->
      <span *ngIf="sender === 'Ollama' && isStreaming && !isThinking" class="streaming-indicator">
        <span class="dot"></span>
        <span class="dot"></span>
        <span class="dot"></span>
      </span>
      <!-- Slot for message actions (like Edit button) -->
      <ng-content></ng-content>
    </div>
  </div>
  <div class="content">
    <markdown [data]="content" [clipboard]="!isStreaming"></markdown>
  </div>
</div>
